[toc]

<!-- toc -->

# 1 Operating system

utuntu + github + gitbook

# 2 Installing essential Tools

## 2.1 updata and upgrade

```bash
sudo apt-get update
sudo apt-get upgrade
```

## 2.2 Installing node.js & npm

We have to install outdated nodejs and npm.

```bash
sudo apt-get install nodejs npm
```

installing git: 

```bash
sudo apt-get install git-all
```

installing gitbook:

```bash
npm install gitbook-cil -g
```

check if the installation is successful.

```bash
node -v
npm -v
git --version
gitbook -v
```

# 3 initializing  local folder with gitbook

```bash
cd [local folder]  #[local folder] can be empty or not
gitbook init
```

then type some topic in file named "summary.md".

```bash
* [Introducing](README.md)
* [Chapter 1](Chapter1/README.md)
  * [section 1](Chapter1/section1)
  * [section 2](Chapter1/section2)
```



```bash
gitbook init   #initalizing again, it'll generate the "*.md" files
```

# 4 bind a github repository to local directory

NOTE: Before we open the website of github,we need install the addon that supports JavaScript into the web browser.

## 3.1 Create a repository

## 3.2 using SSH keys to bind local directory

```bash
ssh-keygen -t rsa -C "[primary E-mail]"   #we can get the [primary E-mail] for github settings.
#NOTE: don't change the file when you see "Enter file in which to save the key (/home/bruce/.ssh/id_rsa): "
```

after upper command,we get two files,"id_rsa.pub"is the file we need in following command

```bash
 cd [directory of new files]    # [directory of new files]:for instance, "/root/.ssh"
 ls   #show the public keys files named "*.pub" to copy for following command
 gedit [public key]  #[public key]:for instance, "id_rsa.pub"
```

```bash
#copy the public keys (whole contents in the opened file).

#on the upper right of github webpage,click the user icon --> "settings" --> "SSH and GPG keys" -->"New SSH keys" --> paste the public keys.
ssh -T git@github.com  #check the binding
```

# 5 Uploadding to website

```bash
vim .gitignore  #Create a file in the book folder
```

paste the following codes in the file

```bash
#ignore the folder generated by gitbook
_book
```

define a variable

```bash\
REPO_SSH='[repository SSH]'  #[repository SSH]: copy from github repository page --> "code" button. 
```

push the project to github

```bash
git init
git add .
git commit -m "inicializing the gitbook project"
git remote add origin $REPO_SSH
git push -u origin master
```

Create the "deploy.sh" file now : 

```bash
cat > ./deploy.sh << "EOF"
#!/usr/bin/env sh

echo 'executing：gitbook build .'
gitbook build .

echo "executing：cd ./_book\n"
cd ./_book

echo "executing：git init\n"
git init

echo "executing：git add -A"
git add -A

echo "executing：commit -m 'deploy'"
git commit -m 'deploy'

echo "executing：git push -f $REPO_SSH master:gh-pages"
git push -f $REPO_SSH master:gh-pages

echo "back to upper directory"
cd -
EOF
```

executing the "deploy.sh"

```bash
bash deploy.sh
```

configure the Github Pages

On Github website, entering the repository page -->"setting" --> "Pages"-->  at "Source" tag select "gh-pages" and save. then we can see the website shows the book.

